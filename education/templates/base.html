{% load static %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Система "Образование"{% endblock %}</title>

    <!-- Подключение jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Подключение DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/2.1.2/css/dataTables.dataTables.min.css">
    <script type="text/javascript" src="https://cdn.datatables.net/2.1.2/js/dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/3.1.0/js/dataTables.buttons.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/3.1.0/js/buttons.dataTables.js"></script>

    <!-- Подключение Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Подключение Bootstrap 5 для DataTable -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/2.1.2/css/dataTables.bootstrap5.css"/>

    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">

</head>
<body>
    <div id="session-data" data-username="{{ username }}"></div>
    <header>
        {% include 'top_bar.html' %}
    </header>
    
    <main>
        {% block content %}
        <h1>Система &laquo;Образование&raquo;</h1>
        {% endblock %}
    </main>

    <script>
        $(document).ready(function() {

            let table = $('#dataTable').DataTable({
                language: {
                    "decimal":        "",
                    "emptyTable":     "Нет данных в таблице",
                    "info":           "Показаны записи _START_-_END_, всего _TOTAL_",
                    "infoEmpty":      "Показаны записи 0-0, всего 0",
                    "infoFiltered":   "(отфильтровано из _MAX_ записей)",
                    "infoPostFix":    "",
                    "thousands":      " ",
                    "lengthMenu":     "Показать _MENU_ записей",
                    "loadingRecords": "Загрузка...",
                    "processing":     "Обработка...",
                    "search":         "Поиск:",
                    "zeroRecords":    "Совпадающих записей не найдено",
                    "paginate": {
                        "first":      "<<",
                        "last":       ">>",
                        "next":       ">",
                        "previous":   "<"
                    },
                    "aria": {
                        "sortAscending":  ": активировать для сортировки столбца по возрастанию",
                        "sortDescending": ": активировать для сортировки столбца по убыванию"
                    }
                },
                layout: {
                    topStart: {
                        buttons: []
                        }
                    }
            });

            link_element = $('#link_action_new');
            if (link_element.length)
                table.button().add( 0, {
                                    text: 'Добавить',
                                    action: function (e, dt, node, config, cb) {
                                        link_element = $('#link_action_new');
                                        hrefValue = link_element.attr('href');
                                        if (hrefValue)
                                            window.location.href = hrefValue;
                                    },
                                    className: 'btn btn-success'
                                });
            link_element = $('#link_action_upload_csv');
            if (link_element.length)
                table.button().add( 1, {
                                    text: 'Из CSV',
                                    action: function (e, dt, node, config, cb) {
                                        link_element = $('#link_action_upload_csv');
                                        hrefValue = link_element.attr('href');
                                        if (hrefValue)
                                            window.location.href = hrefValue;
                                    },
                                    className: 'btn btn-outline-success'
                                });
        });
    </script>
</body>
</html>
