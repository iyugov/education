{% extends 'base.html' %}

{% block content %}
    <h1>{% if form.instance.pk %}Редактирование{% else %}Создание{% endif %} физического лица</h1>
<form method="post">
        {% csrf_token %}
        <div class="row">
            <div class="mt-1 mb-1" style="width: 10em;">
                <div class="form-label">{{ form.last_name.label_tag }}</div>
            </div>
            <div style="width: 12em;">
                {{ form.last_name }}
                {{ form.last_name.errors }}
            </div>
        </div>
        <div class="row">
            <div class="mt-1 mb-1" style="width: 10em;">
                <div class="form-label">{{ form.first_name.label_tag }}</div>
            </div>
            <div style="width: 12em;">
                {{ form.first_name }}
                {{ form.first_name.errors }}
            </div>
        </div>
        <div class="row">
            <div class="mt-1 mb-1" style="width: 10em;">
                <div class="form-label">{{ form.patronymic.label_tag }}</div>
            </div>
            <div style="width: 12em;">
                {{ form.patronymic }}
                {{ form.patronymic.errors }}
            </div>
        </div>
        <div class="row">
            <div class="mt-1 mb-1" style="width: 10em;">
                <div class="form-label">{{ form.birth_date.label_tag }}</div>
            </div>
            <div style="width: 10em;">
                {{ form.birth_date }}
                {{ form.birth_date.errors }}
            </div>
        </div>
        <div class="row">
            <div class="mt-1 mb-1" style="width: 10em;">
                <div class="form-label">{{ form.gender.label_tag }}</div>
            </div>
            <div style="width: 8em;">
                {{ form.gender }}
                {{ form.gender.errors }}
            </div>
        </div>
        <div class="row">
            <div class="mt-1 mb-1" style="width: 10em;">
                <div class="form-label">{{ form.comment.label_tag }}</div>
            </div>
            <div style="width: 20em;">
                {{ form.comment }}
                {{ form.comment.errors }}
            </div>
        </div>
        <div class="row">
            <div class="mt-1 mb-1" style="width: 10em;">
                <div class="form-label">{{ form.social_insurance_number.label_tag }}</div>
            </div>
            <div style="width: 12em;">
                {{ form.social_insurance_number }}
                {{ form.social_insurance_number.errors }}
            </div>
        </div>
        <div class="row">
            <div class="mt-3 mb-3">
                <a href="{{ back_url }}"><button class="btn btn-secondary" type="button">Отменить</button></a>
                <button type="submit" name="action" value="save" class="btn btn-primary">Сохранить</button>
                <button type="submit" name="action" value="save-and-continue" class="btn btn-primary">Обновить таблицу</button>
            </div>
        </div>
        {% if form.instance.pk %}
            <div>
                <h2>Контактная информация</h2>
                {{ formset.management_form }}
                <table id="formset-area">
                    <thead>
                        <th style="display: none;"></th>
                        <th>Тип</th>
                        <th>Данные</th>
                        <th>Комментарий</th>
                    </thead>
                    <tbody>
                        {% for form in formset %}
                            <tr class="formset-form">
                                <td style="display: none;">
                                    {% for hidden in form.hidden_fields %}
                                        {{ hidden }}
                                    {% endfor %}
                                    {{ form.DELETE }}
                                </td>
                                <td>{{ form.contact_info_type }}{{ form.contact_info_type.errors }}</td>
                                <td>{{ form.value }}{{ form.value.errors }}</td>
                                <td>{{ form.comment }}{{ form.comment.errors }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <p>Недоступно для новых объектов.</p>
        {% endif %}
    </form>

{% endblock %}
